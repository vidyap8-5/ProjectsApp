<app-nav-bar></app-nav-bar>
<div class="fill">
<div class="edit-project-container">
    <h2>Edit Project</h2>
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="name">Project Name</label>
            <input type="text" id="name" class="form-control" formControlName="ProjectName">
        </div>
        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" class="form-control" formControlName="Description"></textarea>
        </div>
        <div class="form-group">
            <label for="startDate">Start Date</label>
            <input type="date" id="startDate" class="form-control" formControlName="StartDate"  [(ngModel)]="formattedStartDate">
        </div>
        <div class="form-group">
            <label for="endDate">End Date</label>
            <input type="date" id="endDate" class="form-control" formControlName="EndDate"   [(ngModel)]="formattedEndDate">
        </div>
        <div class="form-group">
            <label for="status">Status</label>
            <select id="status" class="form-control" formControlName="Status" [ngModel]="projectStatus">
                <option value="InProgress">InProgress</option>
                <option value="Completed">Completed</option>
                <option value="Pending">Pending</option>
            </select>
        </div>
        <div class="card">
            <div class="card-header" (click)="toggleTeamMembers()">
                <h5 class="mb-0">
                    <button class="btn btn-link" type="button" aria-expanded="false" aria-controls="teamMembers">
                        Team Members <i class="fas"
                            [ngClass]="isTeamMembersCollapsed ? 'fa-chevron-down' : 'fa-chevron-up'"></i>
                    </button>
                </h5>
            </div>
            <div id="teamMembers" [ngbCollapse]="isTeamMembersCollapsed">
                <div class="card-body">
                    <div formArrayName="Members">
                        <div *ngFor="let member of teamMembers.controls; let i=index" [formGroupName]="i"
                            class="team-member">
                            <label for="name{{i}}">Team Member {{i + 1}} Name</label>
                            <input type="text" id="name{{i}}" class="form-control" formControlName="Name">
                            <label for="role{{i}}">Team Member {{i + 1}} Role</label>
                            <input type="text" id="role{{i}}" class="form-control" formControlName="Role">
                            <label for="email{{i}}">Team Member {{i + 1}} Email</label>
                            <input type="text" id="email{{i}}" class="form-control" formControlName="Email">
                            <label for="phone{{i}}">Team Member {{i + 1}} Role</label>
                            <input type="text" id="phone{{i}}" class="form-control" formControlName="Phone">
                            <button type="button" class="btn btn-danger" (click)="removeTeamMember(i)">Remove</button><br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-secondary" (click)="addTeamMember()">Add Team Member</button><br><br>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
</div>